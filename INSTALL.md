# Інструкція з встановлення

Виконайте ці кроки, щоб налаштувати середовище та запустити матеріали лекції:

## Вимоги

* Python 3.8 або вище
* pip (інсталятор пакетів Python)
* Jupyter Notebook
* USB-камера для проведення інференсу

## Налаштування середовища

Ми підготували скрипти, які створять віртуальне середовище, встановлять усі залежності та зареєструють його в Jupyter. Це гарантує, що і ноутбук, і Python-скрипти використовують одне й те саме середовище.

### Автоматичне налаштування (рекомендовано)

**У macOS/Linux:**

```bash
chmod +x setup_env.sh
./setup_env.sh
```

**У Windows:**

```bash
setup_env.bat
```

Це виконає:

1. Створення віртуального середовища з назвою `venv`
2. Встановлення всіх необхідних пакетів
3. Реєстрацію середовища як ядра Jupyter із назвою "Python (Robotics Vision)"

### Ручне налаштування

Якщо ви віддаєте перевагу ручній установці:

1. **Клонувати репозиторій:**

   ```bash
   git clone https://github.com/profi-robotics/kai-lecture.git
   cd kai-lecture
   ```

2. **Створити віртуальне середовище:**

   ```bash
   python3 -m venv venv
   ```

3. **Активувати віртуальне середовище:**

   У macOS/Linux:

   ```bash
   source venv/bin/activate
   ```

   У Windows:

   ```bash
   venv\Scripts\activate
   ```

   Ви повинні побачити `(venv)` на початку рядка терміналу — це означає, що середовище активне.

4. **Встановити залежності:**

   ```bash
   pip install -r requirements.txt
   ```

5. **Зареєструвати середовище в Jupyter:**

   ```bash
   pip install ipykernel
   python -m ipykernel install --user --name=robotics_vision --display-name="Python (Robotics Vision)"
   ```

> **Примітка:** Завжди переконуйтеся, що віртуальне середовище активне перед роботою в терміналі. Для Jupyter-ноутбуків оберіть ядро "Python (Robotics Vision)".

## Початок роботи

1. **Відкрити Jupyter-ноутбук:**

   ```bash
   jupyter notebook lecture.ipynb
   ```

2. **Запустити скрипт для інференсу:**

   Після завершення лекції ви можете перевірити детекцію об’єктів із вашої камери:

   ```bash
   python run_robot_vision.py
   ```

## Оптимізації для M1 Mac

У ноутбуці лекції реалізовані спеціальні оптимізації для комп’ютерів на базі M1 Mac, зокрема:

* Використання бекенду Metal Performance Shaders (MPS)
* Ефективні налаштування розміру батчу
* Техніки керування пам’яттю

## Усунення неполадок

* Якщо виникають проблеми з USB-камерою, спробуйте змінити індекс камери:

  ```bash
  python run_robot_vision.py --camera 1
  ```

* Якщо PyTorch некоректно розпізнає ваш M1-чіп, переконайтеся, що у вас встановлена найновіша версія:

  ```bash
  pip install --upgrade torch torchvision
  ```
